name: Keep Supabase Active

on:
  schedule:
    # Run at 00:00 and 12:00 every day
    - cron: '0 0,12 * * *'
  workflow_dispatch: # Allows manual run

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping API Health Check
        run: |
          # Replace with your actual backend URL
          # We use a variable if set, otherwise we just log a warning
          if [ -n "${{ secrets.BACKEND_URL }}" ]; then
            echo "Pinging ${{ secrets.BACKEND_URL }}/api/v1/health"
            curl -s "${{ secrets.BACKEND_URL }}/api/v1/health" || echo "Ping failed"
          else
            echo "Warning: BACKEND_URL secret not set. Set it in GitHub Repo Settings > Secrets."
            # Instructions:
            # 1. Go to your GitHub Repository
            # 2. Settings -> Secrets and variables -> Actions
            # 3. New Repository Secret
            # 4. Name: BACKEND_URL
            # 5. Value: https://your-app-name.onrender.com (or wherever your backend is hosted)
          fi
